<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Rzeczpospolita Polska RP</title>
<style>
:root{
  --primary:#e63946;
  --primary-dark:#d62828;
  --secondary:#f1faee;
  --muted:#555;
}
body{
  font-family: 'Segoe UI', Roboto, Arial, sans-serif;
  margin:0;
  background:linear-gradient(160deg,#f1faee,#a8dadc);
  color:#222;
  transition: background 0.5s;
}
header{
  display:flex;align-items:center;gap:12px;
  padding:16px 20px;
  background:var(--primary);
  color:#fff;
}
header img{width:60px;height:auto}
header h1{margin:0;font-size:24px}
header p{margin:0;font-size:14px;color:#f1faee}
nav{display:flex;justify-content:center;flex-wrap:wrap;background:var(--primary-dark);}
nav a{
  color:#fff;text-decoration:none;padding:10px 14px;margin:4px;
  border-radius:6px;transition:0.3s;
}
nav a:hover{background:#fff;color:var(--primary-dark);transform:scale(1.05);}
.container{max-width:1000px;margin:20px auto;padding:0 16px;}
.card{
  background:#fff;border-radius:12px;padding:20px;margin-bottom:18px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
  transition: transform 0.3s;
}
.card:hover{transform: translateY(-3px);}
.section{display:none;}
.section.active{display:block;animation:fadeIn 0.5s;}
@keyframes fadeIn{from{opacity:0}to{opacity:1;}}
.btn{
  background:var(--primary);color:#fff;border:none;padding:10px 14px;
  border-radius:6px;cursor:pointer;transition:0.3s;
}
.btn:hover{background:var(--primary-dark);transform:scale(1.05);}
input,textarea{width:100%;max-width:720px;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc;transition:0.3s;}
input:focus,textarea:focus{outline:none;border-color:var(--primary)}
ul.list{list-style:"üë§ ";padding-left:18px}
.galeria img{width:180px;margin:6px;border-radius:8px;border:2px solid var(--primary)}
.site-footer{background:#222;color:#fff;padding:14px;text-align:center}
.admin-block{margin-bottom:16px;padding:10px;border-left:4px solid var(--primary)}
.admin-item{margin-bottom:6px;padding:6px;border-bottom:1px solid #ccc}
.admin-item img{max-width:120px;margin:4px 0; display:block;}
.admin-controls button{margin:2px;padding:4px 6px;border:none;border-radius:4px;background:#e63946;color:#fff;cursor:pointer}
.admin-controls button:hover{background:#d62828}
.error{color:#b71c1c;margin-top:6px;}
</style>
</head>
<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/1e/Herb_Polski.svg" alt="God≈Ço">
  <div>
    <h1>Rzeczpospolita Polska RP</h1>
    <p>Projekt Roleplay ‚Äî spo≈Çeczno≈õƒá Roblox</p>
  </div>
</header>

<nav>
  <a href="#home" onclick="showSection('home')">Strona g≈Ç√≥wna</a>
  <a href="#aktualnosci" onclick="showSection('aktualnosci')">Aktualno≈õci</a>
  <a href="#obywatele" onclick="showSection('obywatele')">Obywatele</a>
  <a href="#galeria" onclick="showSection('galeria')">Galeria</a>
  <a href="#rekrutacja" onclick="showSection('rekrutacja')">Rekrutacja</a>
  <a href="#kontakt" onclick="showSection('kontakt')">Kontakt</a>
  <a href="#admin" onclick="showSection('admin')">Panel w≈Ça≈õciciela</a>
</nav>

<main class="container">

<section id="home" class="card section active">
  <h2>Witamy w Rzeczpospolitej Polskiej RP</h2>
  <p>Oficjalna strona projektu ‚Äî czytaj aktualno≈õci, zobacz galeriƒô i zg≈Ço≈õ siƒô do rekrutacji.</p>
  
  <h3>Og≈Çoszenia</h3>
  <div id="homeOgloszenia"></div>
  
  <h3>Aktualno≈õci</h3>
  <div id="homeAktualnosci"></div>
</section>

<section id="aktualnosci" class="card section">
  <h2>Aktualno≈õci</h2>
  <div id="aktualnosciLista"></div>
</section>

<section id="obywatele" class="card section">
  <h2>Lista Obywateli</h2>
  <ul id="obywateleLista" class="list"></ul>
</section>

<section id="galeria" class="card section">
  <h2>Galeria</h2>
  <div id="galeriaZdjecia" class="galeria"></div>
</section>

<section id="rekrutacja" class="card section">
  <h2>Rekrutacja</h2>
  <form id="rekrutacjaForm">
    <label>Nick w grze</label>
    <input id="rekrutNick" required>
    <label>Dlaczego chcesz do≈ÇƒÖczyƒá?</label>
    <textarea id="rekrutText" rows="4" required></textarea>
    <button type="submit" class="btn">Wy≈õlij rekrutacjƒô</button>
  </form>
  <p id="rekrutMessage"></p>
</section>

<section id="kontakt" class="card section">
  <h2>Kontakt</h2>
  <p>W≈Ça≈õciciel: <strong>Arnol_Game</strong></p>
  <p>Oficjalny Discord RP: <a href="https://discord.gg/5aZqgpErnc" target="_blank">Kliknij tutaj</a></p>
</section>

<section id="admin" class="card section">
  <div id="pinSection">
    <h2>Wejd≈∫ PIN w≈Ça≈õciciela</h2>
    <input id="ownerPin" type="password" placeholder="Wpisz PIN">
    <button id="pinBtn" class="btn">Otw√≥rz panel</button>
    <p id="pinError" class="error hidden">Niepoprawny PIN</p>
  </div>

  <div id="ownerPanel" class="hidden">
    <h2>Panel w≈Ça≈õciciela ‚Äî zaawansowany</h2>

    <div class="admin-block">
      <h3>Aktualno≈õci</h3>
      <input id="newsTitle" placeholder="Tytu≈Ç">
      <textarea id="newsText" placeholder="Tre≈õƒá"></textarea>
      <button onclick="adminAddNews()" class="btn">Dodaj aktualno≈õƒá</button>
      <h4>Lista aktualno≈õci</h4>
      <div id="adminNewsList"></div>
    </div>

    <div class="admin-block">
      <h3>Og≈Çoszenia</h3>
      <input id="announceText" placeholder="Tre≈õƒá og≈Çoszenia">
      <button onclick="adminAddOgloszenie()" class="btn">Dodaj og≈Çoszenie</button>
      <h4>Lista og≈Çosze≈Ñ</h4>
      <div id="adminOgloszeniaList"></div>
    </div>

    <div class="admin-block">
      <h3>Obywatele</h3>
      <div id="adminUsersList"></div>
    </div>

    <div class="admin-block">
      <h3>Rekrutacje</h3>
      <div id="adminRekrutList"></div>
    </div>

    <div class="admin-block">
      <h3>Galeria</h3>
      <input type="file" id="photoInput" accept="image/*">
      <button onclick="adminAddPhoto()" class="btn">Dodaj zdjƒôcie</button>
      <h4>Zdjƒôcia</h4>
      <div id="adminGaleria"></div>
    </div>

    <button onclick="ownerLogout()" class="btn" style="background:#d62828;margin-top:12px;">Wyloguj</button>
  </div>
</section>

</main>
<footer class="site-footer">
  <p>¬© 2025 Rzeczpospolita Polska RP</p>
</footer>

<script>
let aktualnosci = JSON.parse(localStorage.getItem("aktualnosci")||"[]");
let ogloszenia = JSON.parse(localStorage.getItem("ogloszenia")||"[]");
let obywatele = JSON.parse(localStorage.getItem("obywatele")||"[]");
let rekrutacje = JSON.parse(localStorage.getItem("rekrutacje")||"[]");
let galeria = JSON.parse(localStorage.getItem("galeria")||"[]");

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function escapeHtml(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");}

function renderAktualnosci(){
  const el=document.getElementById("aktualnosciLista");
  el.innerHTML = aktualnosci.length===0 ? "<p>Brak aktualno≈õci.</p>" : aktualnosci.map(n=>`<article class="news"><h3>${escapeHtml(n.title)}</h3><p>${escapeHtml(n.text)}</p></article>`).join("");
}
function renderOgloszenia(){
  const el=document.getElementById("adminOgloszeniaList");
  el.innerHTML = ogloszenia.length===0 ? "<p>Brak og≈Çosze≈Ñ.</p>" : ogloszenia.map((o,i)=>`<div class="admin-item">${escapeHtml(o)}<div class="admin-controls"><button onclick="adminDeleteOgloszenie(${i})">Usu≈Ñ</button></div></div>`).join("");
}
function renderObywatele(){
  const el=document.getElementById("obywateleLista");
  el.innerHTML = obywatele.length===0 ? "<p>Brak obywateli.</p>" : obywatele.map(u=>`<li>${escapeHtml(u.nick)} <span class="muted">(${escapeHtml(u.role||'Obywatel')})</span></li>`).join("");
}
function renderGaleria(){
  const el=document.getElementById("galeriaZdjecia");
  el.innerHTML = galeria.length===0 ? "<p>Brak zdjƒôƒá.</p>" : galeria.map(src=>`<img src="${src}" alt="Zdjƒôcie">`).join("");
}
function renderHome(){
  const homeO=document.getElementById("homeOgloszenia");
  homeO.innerHTML = ogloszenia.length===0 ? "<p>Brak og≈Çosze≈Ñ.</p>" : ogloszenia.map(o=>`<div class="card">${escapeHtml(o)}</div>`).join("");
  const homeA=document.getElementById("homeAktualnosci");
  homeA.innerHTML = aktualnosci.length===0 ? "<p>Brak aktualno≈õci.</p>" : aktualnosci.map(n=>`<div class="card"><strong>${escapeHtml(n.title)}</strong><p>${escapeHtml(n.text)}</p></div>`).join("");
}
function renderAdminLists(){
  renderAktualnosci();
  renderOgloszenia();
  renderHome();
  const usersDiv=document.getElementById("adminUsersList");
  usersDiv.innerHTML=obywatele.map((u,i)=>`<div class="admin-item">${escapeHtml(u.nick)} ‚Äî ${escapeHtml(u.role||'Obywatel')}<div class="admin-controls"><button onclick="adminEditUser(${i})">Edytuj</button><button onclick="adminRemoveUser(${i})">Usu≈Ñ</button></div></div>`).join("")||"<p>Brak u≈ºytkownik√≥w.</p>";
  const rekrutDiv=document.getElementById("adminRekrutList");
  rekrutDiv.innerHTML=rekrutacje.map((r,i)=>`<div class="admin-item">${escapeHtml(r.nick)} ‚Äî ${escapeHtml(r.text)} ‚Äî ${r.approved?'<span style="color:green">zatw.</span>':'<span style="color:orange">oczek.</span>'}<div class="admin-controls">${!r.approved?`<button onclick="adminApproveRekrut(${i})">Zatwierd≈∫</button>`:""}<button onclick="adminRemoveRekrut(${i})">Usu≈Ñ</button></div></div>`).join("")||"<p>Brak rekrutacji.</p>";
  const galEdit=document.getElementById("adminGaleria");
  galEdit.innerHTML=galeria.map((g,i)=>`<div class="admin-item"><img src="${g}"><div class="admin-controls"><button onclick="adminRemovePhoto(${i})">Usu≈Ñ</button></div></div>`).join("")||"<p>Brak zdjƒôƒá.</p>";
}

// --- REKRUTACJA ---
document.getElementById("rekrutacjaForm").addEventListener("submit",e=>{
  e.preventDefault();
  const nick=document.getElementById("rekrutNick").value.trim();
  const text=document.getElementById("rekrutText").value.trim();
  if(!nick||!text)return;
  rekrutacje.unshift({nick,text,approved:false,date:new Date().toISOString()});
  localStorage.setItem("rekrutacje",JSON.stringify(rekrutacje));
  document.getElementById("rekrutMessage").innerHTML='‚úÖ Rekrutacja wys≈Çana! Do≈ÇƒÖcz na Discord: <a href="https://discord.gg/5aZqgpErnc" target="_blank">Kliknij tutaj</a>';
  document.getElementById("rekrutacjaForm").reset();
  renderAdminLists();
});

// --- PANEL W≈ÅA≈öCICIELA ---
document.getElementById("pinBtn").addEventListener("click",()=>{
  const val=document.getElementById("ownerPin").value.trim();
  if(val==="114"){
    document.getElementById("pinSection").classList.add("hidden");
    document.getElementById("ownerPanel").classList.remove("hidden");
    sessionStorage.setItem("ownerOpen","true");
    renderAdminLists();
  } else{
    const err=document.getElementById("pinError");
    err.classList.remove("hidden");
    setTimeout(()=>err.classList.add("hidden"),2500);
  }
});

if(sessionStorage.getItem("ownerOpen")==="true"){
  document.getElementById("pinSection").classList.add("hidden");
  document.getElementById("ownerPanel").classList.remove("hidden");
  renderAdminLists();
}

// --- ADMIN FUNKCJE ---
function adminAddNews(){
  const t=document.getElementById("newsTitle").value.trim();
  const x=document.getElementById("newsText").value.trim();
  if(!t||!x)return alert("Uzupe≈Çnij tytu≈Ç i tre≈õƒá");
  aktualnosci.unshift({title:t,text:x});
  localStorage.setItem("aktualnosci",JSON.stringify(aktualnosci));
  renderAdminLists();
  document.getElementById("newsTitle").value="";
  document.getElementById("newsText").value="";
}
function adminAddOgloszenie(){
  const t=document.getElementById("announceText").value.trim();
  if(!t)return alert("Wpisz tre≈õƒá");
  ogloszenia.unshift(t);
  localStorage.setItem("ogloszenia",JSON.stringify(ogloszenia));
  renderAdminLists();
  document.getElementById("announceText").value="";
}
function adminDeleteOgloszenie(i){ogloszenia.splice(i,1);localStorage.setItem("ogloszenia",JSON.stringify(ogloszenia));renderAdminLists();}
function adminEditUser(i){let u=obywatele[i];const r=prompt("Nowa rola:",u.role||"Obywatel");if(r!==null){u.role=r;localStorage.setItem("obywatele",JSON.stringify(obywatele));renderObywatele();renderAdminLists();}}
function adminRemoveUser(i){if(confirm("UsunƒÖƒá obywatela?")){obywatele.splice(i,1);localStorage.setItem("obywatele",JSON.stringify(obywatele));renderObywatele();renderAdminLists();}}
function adminApproveRekrut(i){rekrutacje[i].approved=true;obywatele.push({nick:rekrutacje[i].nick,role:"Obywatel"});localStorage.setItem("rekrutacje",JSON.stringify(rekrutacje));localStorage.setItem("obywatele",JSON.stringify(obywatele));renderObywatele();renderAdminLists();}
function adminRemoveRekrut(i){rekrutacje.splice(i,1);localStorage.setItem("rekrutacje",JSON.stringify(rekrutacje));renderAdminLists();}
function adminAddPhoto(){
  const input=document.getElementById("photoInput");
  if(input.files && input.files[0]){
    const reader=new FileReader();
    reader.onload=function(e){
      galeria.unshift(e.target.result);
      localStorage.setItem("galeria",JSON.stringify(galeria));
      renderGaleria();
      renderAdminLists();
      input.value="";
    }
    reader.readAsDataURL(input.files[0]);
  }
}
function adminRemovePhoto(i){galeria.splice(i,1);localStorage.setItem("galeria",JSON.stringify(galeria));renderGaleria();renderAdminLists();}
function ownerLogout(){sessionStorage.removeItem("ownerOpen");document.getElementById("ownerPanel").classList.add("hidden");document.getElementById("pinSection").classList.remove("hidden");}

// --- INITIAL RENDER ---
renderAktualnosci();
renderOgloszenia();
renderHome();
renderObywatele();
renderGaleria();
renderAdminLists();
</script>
</body>
</html>
